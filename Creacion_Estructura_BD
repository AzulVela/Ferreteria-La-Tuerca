create database tp_latuerca
go

USE [Tp_LaTuerca]
GO
/****** Object:  Table [dbo].[Cliente]    Script Date: 12-Sep-19 18:09:44 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Cliente](
	[CodCliente] [int] NOT NULL identity,
	[Apellido] [varchar](20) NOT NULL,
	[Nombre] [varchar](20) NOT NULL,
	[Telefono] [varchar](30) NULL,
	[CUIT] [varchar](15) NULL,
 CONSTRAINT [PK_Cliente] PRIMARY KEY CLUSTERED 
(
	[CodCliente] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Detalle_Factura]    Script Date: 12-Sep-19 18:09:44 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Detalle_Factura](
	[NroFactura] [int] NOT NULL,
	[CodTipoFactura] [int] NOT NULL,
	[CodProducto] [int] NOT NULL,
	[Cantidad] [int] NULL,
	[Precio] [float] NULL,
 CONSTRAINT [PK_Detalle_Factura] PRIMARY KEY CLUSTERED 
(
	[NroFactura] ASC,
	[CodTipoFactura] ASC,
	[CodProducto] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Estructura]    Script Date: 12-Sep-19 18:09:44 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Estructura](
	[IdProdNivelSuperior] [int] NOT NULL,
	[IdProdNivelInferior] [int] NOT NULL,
	[Cantidad] [int] NULL,
 CONSTRAINT [PK_Estructura] PRIMARY KEY CLUSTERED 
(
	[IdProdNivelSuperior] ASC,
	[IdProdNivelInferior] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Factura]    Script Date: 12-Sep-19 18:09:44 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Factura](
	[NroFactura] [int] NOT NULL identity,
	[CodTipoFactura] [int] NOT NULL,
	[CodCliente] [int] NOT NULL,
	[CodTipoDocV] [int] NOT NULL,
	[NroTipoDocV] [int] NOT NULL,
	[Fecha] [datetime] NULL,
 CONSTRAINT [PK_Factura] PRIMARY KEY CLUSTERED 
(
	[NroFactura] ASC,
	[CodTipoFactura] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Producto]    Script Date: 12-Sep-19 18:09:44 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Producto](
	[CodProducto] [int] NOT NULL identity,
	[Nombre] [varchar](50) NOT NULL,
	[Descripcion] [varchar](50) NOT NULL,
	[CodTipoMedida] [int] NOT NULL,
	[Precio] [float] NULL,
	[CodTipoUso] [int] NOT NULL,
	[CodProveedor] [int] NOT NULL,
 CONSTRAINT [PK_Producto] PRIMARY KEY CLUSTERED 
(
	[CodProducto] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Proveedor]    Script Date: 12-Sep-19 18:09:44 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Proveedor](
	[CodProveedor] [int] NOT NULL identity,
	[Apellido] [varchar](20) NOT NULL,
	[Nombre] [varchar](20) NOT NULL,
	[Direccion] [varchar](50) NULL,
	[Telefono] [varchar](30) NULL,
	[TiempoDeEntrega] [int] NULL,
 CONSTRAINT [PK_Proveedor] PRIMARY KEY CLUSTERED 
(
	[CodProveedor] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Tipo_Doc]    Script Date: 12-Sep-19 18:09:44 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tipo_Doc](
	[CodTipoDoc] [int] NOT NULL identity,
	[Nombre] [varchar](20) NOT NULL,
	[Descripcion] [varchar](50) NULL,
 CONSTRAINT [PK_Tipo_Doc] PRIMARY KEY CLUSTERED 
(
	[CodTipoDoc] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Tipo_Factura]    Script Date: 12-Sep-19 18:09:44 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tipo_Factura](
	[CodTipoFactura] [int] NOT NULL identity,
	[Nombre] [varchar](20) NULL,
	[Descripcion] [varchar](50) NULL,
 CONSTRAINT [PK_Tipo_Factura] PRIMARY KEY CLUSTERED 
(
	[CodTipoFactura] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Tipo_Medida]    Script Date: 12-Sep-19 18:09:44 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tipo_Medida](
	[CodTipoMedida] [int] NOT NULL identity,
	[Nombre] [varchar](30) NOT NULL,
	[Descripcion] [varchar](50) NULL,
 CONSTRAINT [PK_Tipo_Medida] PRIMARY KEY CLUSTERED 
(
	[CodTipoMedida] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Tipo_Uso]    Script Date: 12-Sep-19 18:09:44 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tipo_Uso](
	[CodTipoUso] [int] NOT NULL identity,
	[Nombre] [varchar](30) NOT NULL,
	[Descripcion] [varchar](50) NULL,
 CONSTRAINT [PK_Tipo_Uso] PRIMARY KEY CLUSTERED 
(
	[CodTipoUso] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Vendedor]    Script Date: 12-Sep-19 18:09:44 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Vendedor](
	[CodTipoDoc] [int] NOT NULL,
	[NroTipoDoc] [int] NOT NULL,
	[FechaIngreso] [datetime] NULL,
	[FechaNac] [datetime] NULL,
	[Apellido] [varchar](20) NOT NULL,
	[Nombre] [varchar](20) NOT NULL,
	[Telefono] [varchar](30) NULL,
 CONSTRAINT [PK_Vendedor] PRIMARY KEY CLUSTERED 
(
	[CodTipoDoc] ASC,
	[NroTipoDoc] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
ALTER TABLE [dbo].[Detalle_Factura]  WITH CHECK ADD  CONSTRAINT [FK_Detalle_Factura_Factura] FOREIGN KEY([NroFactura], [CodTipoFactura])
REFERENCES [dbo].[Factura] ([NroFactura], [CodTipoFactura])
GO
ALTER TABLE [dbo].[Detalle_Factura] CHECK CONSTRAINT [FK_Detalle_Factura_Factura]
GO
ALTER TABLE [dbo].[Estructura]  WITH CHECK ADD  CONSTRAINT [FK_Estructura_Producto_Inferior] FOREIGN KEY([IdProdNivelInferior])
REFERENCES [dbo].[Producto] ([CodProducto])
GO
ALTER TABLE [dbo].[Estructura] CHECK CONSTRAINT [FK_Estructura_Producto_Inferior]
GO
ALTER TABLE [dbo].[Estructura]  WITH CHECK ADD  CONSTRAINT [FK_Estructura_Producto_Superior] FOREIGN KEY([IdProdNivelSuperior])
REFERENCES [dbo].[Producto] ([CodProducto])
GO
ALTER TABLE [dbo].[Estructura] CHECK CONSTRAINT [FK_Estructura_Producto_Superior]
GO
ALTER TABLE [dbo].[Factura]  WITH CHECK ADD  CONSTRAINT [FK_Factura_Cliente] FOREIGN KEY([CodCliente])
REFERENCES [dbo].[Cliente] ([CodCliente])
GO
ALTER TABLE [dbo].[Factura] CHECK CONSTRAINT [FK_Factura_Cliente]
GO
ALTER TABLE [dbo].[Factura]  WITH CHECK ADD  CONSTRAINT [FK_Factura_Vendedor] FOREIGN KEY([CodTipoDocV], [NroTipoDocV])
REFERENCES [dbo].[Vendedor] ([CodTipoDoc], [NroTipoDoc])
GO
ALTER TABLE [dbo].[Factura] CHECK CONSTRAINT [FK_Factura_Vendedor]
GO
ALTER TABLE [dbo].[Producto]  WITH CHECK ADD  CONSTRAINT [FK_Producto_Tipo_Medida] FOREIGN KEY([CodTipoMedida])
REFERENCES [dbo].[Tipo_Medida] ([CodTipoMedida])
GO
ALTER TABLE [dbo].[Producto] CHECK CONSTRAINT [FK_Producto_Tipo_Medida]
GO
ALTER TABLE [dbo].[Producto]  WITH CHECK ADD  CONSTRAINT [FK_Producto_Tipo_Uso] FOREIGN KEY([CodTipoUso])
REFERENCES [dbo].[Tipo_Uso] ([CodTipoUso])
GO
ALTER TABLE [dbo].[Producto] CHECK CONSTRAINT [FK_Producto_Tipo_Uso]
GO
ALTER TABLE [dbo].[Vendedor]  WITH CHECK ADD  CONSTRAINT [FK_Vendedor_Tipo_Doc] FOREIGN KEY([CodTipoDoc])
REFERENCES [dbo].[Tipo_Doc] ([CodTipoDoc])
GO
ALTER TABLE [dbo].[Vendedor] CHECK CONSTRAINT [FK_Vendedor_Tipo_Doc]
GO
ALTER TABLE [dbo].[Producto]  WITH CHECK ADD  CONSTRAINT [FK_Producto_Proveedor] FOREIGN KEY([CodProveedor])
REFERENCES [dbo].[Proveedor] ([CodProveedor])
GO
ALTER TABLE [dbo].[Producto] CHECK CONSTRAINT [FK_Producto_Proveedor]
GO

insert into tipo_medida values
('Metros','Medida de longitud'),
('Metros cuadrados','Medida de superficie'),
('Metros cúbicos','Medida de volúmen'),
('Kg','Medida de masa'),
('N/A','Herramental/Maquinaria');

insert into tipo_uso values
('General','Herramienta/insumo de propósito general'),
('Albañilería','Herramienta/insumo de albañilería'),
('Carpintería','Herramienta/insumo de carpintería');

insert into proveedor values 
('Ferro','Cons','Duarte Quiroz 621','351-2293485',30),
('Zara','Te','Av. Colón 829','351-2397372',15),
('Falco','Hnos.','Acuña 81','3571-648292',20);

insert into producto values 
('Amoladora','Herramienta',5,3000,1,1),
('Hormigonera','Maquinaria albañilería',5,10000,2,1),
('Clavo corto','Clavo 4cm',4,240,1,1),
('Clavo largo','Clavo 7cm',4,400,1,1),
('Placa Madera','Insumo de carpintería',2,500,3,1),
('Tornillo','Insumo general',1,0.60,1,1),
('Tuerca','Insumo general',1,0.40,1,1);

insert into tipo_factura values 
('A','Emitida por RI a RI'),
('B','Emitida por RI a CF'),
('C','Emitida por monotributista');

insert into cliente values 
('Pérez','Juan','351-1231292','30-72098763-6'),
('Pito','Elsa','351-4921292','30-72093243-2'),
('Flores del Campo','Zacarías','351-1242292','30-62028421-6'),
('Lancha','Chin Chu','351-5124286','30-72839637-3');

go

insert into tipo_doc values
('DNI','Documento Nacional de Identidad'),
('LE','Libreta de Enrolamiento'),
('CI','Cédula de Identidad');

insert into vendedor values 
(1,36975628,convert(datetime,'16/02/1995',103),convert(datetime,'05/03/1975',103),'Gaona Lugo','Orlando','351-2852890');



